"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["22173"],{784370:function(e){e.exports="/assets/ac8ab79ce1412299.gif"},64395:function(e){e.exports="/assets/dc0be2895b8884fd.svg"},785388:function(e,t,i){i.d(t,{default:()=>Q}),i(47120),i(653041),i(177593),i(411104);var n=i(200651),a=i(192379),o=i(120356),s=i.n(o),l=i(392711),r=i.n(l),c=i(866442),d=i(442837),u=i(780384),h=i(481060),m=i(596454),p=i(129861),g=i(700582),f=i(607070),v=i(600164),x=i(633302),b=i(712057),T=i(660189),j=i(372900),_=i(566006),C=i(620652),R=i(815605),S=i(222677),N=i(995774),I=i(665906),E=i(210887),Z=i(314897),y=i(592125),O=i(271383),A=i(542578),M=i(375954),P=i(496675),w=i(699516),L=i(594174),k=i(768581),B=i(176354),U=i(5192),F=i(709054),V=i(91047),D=i(981631),G=i(388032),H=i(834471),z=i(483938);function W(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function K(e){return null==e.id?x.ZP.convertSurrogateToName(e.name):":".concat(e.name,":")}let J=e=>{let{emoji:t,channelId:i,messageId:o}=e,[l,r]=a.useState(!0),[c,d]=a.useState([]),u=a.useMemo(()=>{if(null==c||c.length<1)return;let e=(0,R.Zn)(t,c[0],i,{emojiSize:C.M.LARGE,messageId:o});return(0,n.jsx)(C.Z,{className:H.__invalid_effect,effect:e,emojiSize:C.M.LARGE,onComplete:()=>r(!1)})},[c,t,i,o]);return a.useEffect(()=>{let e=!1;return r(!0),async function(){let i=await (0,B.B6)(t);Array.isArray(i)&&i.length>0&&!e&&d(i)}(),()=>{e=!0}},[t]),(0,n.jsxs)("div",{className:H.burstEmojiSection,children:[u,(0,n.jsx)(m.Z,{className:s()(H.burstEmoji,{[H.hideEmoji]:l}),emojiId:t.id,emojiName:t.name,animated:t.animated,size:"reaction"}),(0,n.jsx)(h.Text,{variant:"text-md/medium",children:K(t)})]})};class X extends a.PureComponent{render(){let{emoji:e,count:t,isSelected:i,setSelected:a,reactionType:o,colors:l}=this.props,r=K(e),d=function(e,t,i,a){let o=null==e.id?B.ZP.getURL(e.name):k.ZP.getEmojiURL({id:e.id,animated:e.animated,size:24});return null!=o&&""!==o?(0,n.jsx)("img",{className:i,src:o,alt:e.name}):(0,n.jsx)("span",{className:a,children:e.name})}(e,0,H.emoji,s()(H.emoji,H.emojiText)),u=o===_.O.BURST,m=u?G.t.VmiNjY:G.t.cNfs19,p=G.intl.formatToPlainString(m,{name:r,n:t}),g={},f={};if(u){let{backgroundColor:e="",opacity:t=1,accentColor:n=""}=null!=l?l:{};if(f.color=n,i){var v;g.background=null!==(v=(0,c.wK)(e,t))&&void 0!==v?v:""}}return(0,n.jsx)(h.ua7,{position:"left",text:r,children:l=>{let{onMouseEnter:r,onMouseLeave:c}=l;return(0,n.jsxs)(h.P3F,{className:s()({[H.reactionDefault]:!i,[H.reactionSelected]:i}),"aria-label":p,onClick:()=>a({emoji:e,reactionType:o}),onMouseEnter:r,onMouseLeave:c,style:g,children:[d,(0,n.jsx)(h.Text,{variant:"text-sm/bold",style:f,children:t})]})}})}}function Y(e){let{emoji:t,user:i,message:a,channel:o,guildId:s,reactionType:l,onRemoveReactor:r,disableManage:c=!1}=e,u=(0,d.e7)([Z.default],()=>Z.default.getId()),m=(0,d.e7)([L.default],()=>L.default.getUser(i.id),[i]),f=(0,I.$R)(o),x=(0,d.e7)([P.Z],()=>P.Z.can(D.Plq.MANAGE_MESSAGES,o)&&f)||u===i.id,b=(0,d.e7)([O.ZP,y.Z,w.Z],()=>U.ZP.getName(s,o.id,i));return(0,n.jsxs)(v.Z,{className:H.reactorDefault,onContextMenu:e=>(0,V.Pv)(e,i,o),align:v.Z.Align.CENTER,children:[(0,n.jsx)(v.Z.Child,{wrap:!0,grow:0,shrink:0,className:z.marginReset,children:(0,n.jsx)(g.Z,{user:null!=m?m:i,size:h.EFr.SIZE_24})}),(0,n.jsx)(v.Z.Child,{children:(0,n.jsxs)(h.Text,{tag:"strong",variant:"text-md/normal",className:H.name,children:[null!=b&&""!==b&&(0,n.jsx)("span",{className:i.isPomelo()?"":H.nickname,children:b}),(0,n.jsx)(p.Z,{user:i,className:null!=b&&""!==b?H.tagFaded:null,usernameClass:H.username,discriminatorClass:H.discriminator,forceUsername:!0})]})}),!c&&x&&(0,n.jsx)(h.P3F,{onClick:function(){S.WO({channelId:o.id,messageId:a.id,emoji:t,location:S.TW.MESSAGE,userId:i.id,options:{burst:l===_.O.BURST}}),null==r||r()},children:(0,n.jsx)(h.Dio,{size:"xs",color:"currentColor",className:H.remove})})]})}class q extends a.PureComponent{componentDidMount(){this.loadMore()}componentDidUpdate(e){r().isEqual(this.props.reaction,e.reaction)&&this.props.reactionType===e.reactionType||this.setState({lastId:null,loadingMore:!1},()=>this.loadMore())}loadMore(){let{message:e,reaction:t,reactionType:i}=this.props,{lastId:n}=this.state;this.setState({loadingMore:!0}),S.U0({channelId:e.getChannelId(),messageId:e.id,emoji:t.emoji,limit:D.pTL,after:n,type:i}).then(e=>{var t;return this.setState({loadingMore:!1,lastId:null===(t=e[e.length-1])||void 0===t?void 0:t.id})})}renderSection(){return null}render(){let{hasMore:e,reactors:t,reaction:i,message:a,reactionType:o}=this.props,s=[];return 0===t.length&&this.state.loadingMore?s.push(length):(s.push(t.length),e&&s.push(1)),(0,n.jsxs)("div",{className:H.reactorsContainer,children:[o===_.O.BURST&&(0,n.jsx)(J,{emoji:i.emoji,channelId:a.getChannelId(),messageId:a.id}),(0,n.jsx)(h.aVo,{className:H.reactors,fade:!0,ref:this.scrollerRef,sections:s,sectionHeight:0,rowHeight:this.getRowHeight,renderRow:this.renderRow,renderSection:this.renderSection,onScroll:e?this.handleScroll:void 0})]})}constructor(...e){super(...e),W(this,"scrollerRef",a.createRef()),W(this,"state",{lastId:null,loadingMore:!1}),W(this,"handleScroll",()=>{let{current:e}=this.scrollerRef;if(null==e)return;let t=e.getScrollerState();t.scrollTop+t.offsetHeight>=t.scrollHeight-44&&this.props.hasMore&&!this.state.loadingMore&&this.loadMore()}),W(this,"getRowHeight",(e,t)=>{let{reactors:i}=this.props;if(1===e)return 0===t?44:0;if(0===e){if(0===t&&0===i.length)return 440;if(null!=this.props.reactors[t])return 44}return 0}),W(this,"renderRow",e=>{let{section:t,row:i}=e,{message:a,guildId:o,channel:s,reaction:l,reactors:r,reactionType:c,disableManage:d}=this.props,u=r[i];return 1===t?0===i?(0,n.jsx)(h.$jN,{className:H.spinnerMore},"hasMore"):null:0===r.length&&this.state.loadingMore?(0,n.jsx)(h.$jN,{className:H.spinner},"loadingMore"):null!=u&&(0,n.jsx)(Y,{message:a,emoji:l.emoji,guildId:o,channel:s,user:u,reaction:l,reactionType:c,disableManage:d},u.id)})}}let $=d.ZP.connectStores([A.Z],e=>{let{message:t,reaction:i,reactionType:n}=e,a=A.Z.getReactions(t.getChannelId(),t.id,i.emoji,D.pTL,n);if(null==a)return{reactors:[],hasMore:!1};let o=Object.values(a),s=(n===_.O.BURST?i.burst_count:i.count)>o.length;return{reactors:o,hasMore:s}})(q);function Q(e){let{message:t,selectedReaction:i,disableManage:o=!1,disableTabs:s=!1,onClose:l,transitionState:r,"aria-label":c=G.intl.string(G.t.gHp0Cw)}=e,m=(0,d.e7)([y.Z],()=>y.Z.getChannel(t.getChannelId())),p=null==m?void 0:m.getGuildId(),g=(0,d.e7)([M.Z,T.Z],()=>{var e,i;let n=null!==(i=M.Z.getMessage(t.getChannelId(),t.id))&&void 0!==i?i:null===(e=T.Z.getMessage(F.default.castMessageIdAsChannelId(t.id)))||void 0===e?void 0:e.firstMessage;return null!=n?n.reactions:[]},[t]),v=a.useMemo(()=>{let e=[];return g.forEach(t=>{t.burst_count>0&&e.push({...t,count:0}),t.count>0&&e.push({...t,burst_count:0})}),e.sort((e,t)=>{let i=e.burst_count>0?e.burst_count:e.count;return(t.burst_count>0?t.burst_count:t.count)-i}),e},[g]),x=v[0],[C,R]=function(e,t,i){let[n,o]=a.useState(null!=e?e:t);return a.useEffect(()=>{null!=n&&null==i.find(e=>{let t=null!=e.me_vote?_.O.VOTE:e.burst_count>0?_.O.BURST:_.O.NORMAL;return(0,N.ir)(e.emoji,n.emoji)&&t===n.reactionType})&&o(t)},[n,o,i,t]),[n,o]}(i,null!=x?{emoji:x.emoji,reactionType:x.burst_count>0?_.O.BURST:_.O.NORMAL}:null,g),S=a.useMemo(()=>{var e;return null==C?null:null!==(e=g.find(e=>(0,N.ir)(e.emoji,C.emoji)))&&void 0!==e?e:null},[g,C]),I=(0,d.e7)([f.Z],()=>f.Z.saturation),Z=(0,d.e7)([E.Z],()=>(0,u.wj)(E.Z.theme));if(a.useEffect(()=>{(0===g.length||null==C&&null==S)&&setImmediate(l)},[l,g.length,S,C]),null==C||null==S)return(0,n.jsx)(h.$jN,{});if(null==m)throw Error("MessageReactions.render: Message does not have a channelId");return(0,n.jsx)(j.Z.Provider,{value:null!=p?p:void 0,children:(0,n.jsxs)(h.Y0X,{"aria-label":c,transitionState:r,size:h.CgR.DYNAMIC,className:H.container,children:[s?null:(0,n.jsx)(h.Ttm,{className:H.scroller,fade:!0,children:v.map(e=>{var t;let i=e.burst_count>0;return(0,n.jsx)(X,{isSelected:ee(C,e,i?_.O.BURST:_.O.NORMAL),setSelected:R,reactionType:i?_.O.BURST:_.O.NORMAL,emoji:e.emoji,count:i?e.burst_count:e.count,colors:null!=e.burst_colors?(0,b.Z)(e.burst_colors,I,Z):void 0},"".concat(i?"burst-":"normal-").concat(null!==(t=e.emoji.id)&&void 0!==t?t:"",":").concat(e.emoji.name))})}),(0,n.jsx)($,{message:t,reaction:S,guildId:p,channel:m,reactionType:C.reactionType,disableManage:o})]})})}let ee=(e,t,i)=>r().isEqual(e.emoji,t.emoji)&&e.reactionType===i},963374:function(e,t,i){i.d(t,{nC:()=>u}),i(47120),i(757143),i(653041);var n=i(392711),a=i.n(n),o=i(697741);let s=new Set(["a","an","and","are","as","at","be","but","by","for","if","in","into","is","it","no","not","of","on","or","such","that","the","their","then","there","these","they","this","to","was","will","with"]);function l(e){return e.replace(/('|\u2019|\uFF07)(s|S)$/,"")}function r(e){return e.toLowerCase()}function c(e){return s.has(e)}function d(e){return 0===e.length}function u(e){let t=new Set(a()(e.split(/\W+/)).map(l).reject(d).map(r).reject(c).map(o.$).value());return e=>(function e(t,i){if(Array.isArray(t))t.forEach(t=>e(t,i));else if("string"==typeof t.content&&"codeBlock"!==t.type){let e=[],n="";t.content.split(/(\W+)/g).forEach(t=>{var a;!d(a=r(l(a=t)))&&!c(a)&&i.has((0,o.$)(a))?(n.length>0&&e.push({type:"text",content:n}),e.push({type:"highlight",content:t}),n=""):n+=t}),e.length>0&&(n.length>0&&e.push({type:"text",content:n}),"text"===t.type?t.content=e:t.content=[{type:"text",content:e}])}else null!=t.content&&e(t.content,i);return t})(e,t)}},446489:function(e,t,i){i.d(t,{Z:()=>g,y:()=>p});var n,a,o=i(200651),s=i(192379),l=i(392711),r=i.n(l),c=i(748780),d=i(451478);function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var h=((n=h||{})[n.ABOVE=0]="ABOVE",n[n.VISIBLE=1]="VISIBLE",n[n.BELOW=2]="BELOW",n);function m(e,t){return{toValue:e,duration:null!=t?t:300,easing:c.Z.Easing.inOut(c.Z.Easing.back())}}function p(e,t,i){if(null!=t){let n=Math.ceil(Math.log10(e+1));return null!=i&&i>0?Math.min(n,i)*t:n*t}}class g extends(a=s.PureComponent){static getDerivedStateFromProps(e,t){let{prevValue:i,currValue:n,nextValue:a}=t;return null==i&&n!==e.value?{prevValue:d.Z.isFocused()?n:null,currValue:e.value}:null!=a&&a!==e.value?{nextValue:e.value}:null}componentDidUpdate(e,t){let{prevValue:i,currValue:n}=this.state;i!==t.prevValue&&null!=i&&this.animateBetween(i,n)}animateBetween(e,t){let i;let{forcePosition:n,animationSpeed:a}=this.props;this.prevAnimate.setValue(1),null!=n?0===n?(this.currAnimate.setValue(0),i=2):2===n&&(this.currAnimate.setValue(2),i=0):e>t?(this.currAnimate.setValue(0),i=2):(this.currAnimate.setValue(2),i=0),c.Z.parallel([c.Z.timing(this.prevAnimate,m(i,a)),c.Z.timing(this.currAnimate,m(1,a))]).start(this.animateNext)}getAnimatedStyle(e){let{animationColor:t}=this.props;return{transform:[{translateY:e.interpolate({inputRange:[0,1,2],outputRange:["-100%","0%","100%"]})}],position:"absolute",top:0,left:0,right:0,bottom:0,...null!=t&&{color:t}}}getMinWidth(e){let{digitWidth:t,padStartLength:i}=this.props;return p(e,t,i)}padValue(e){let{padStartLength:t}=this.props;return null!=t?String(e).padStart(t,"0"):e}render(){let{prevValue:e,currValue:t}=this.state,{color:i,formatString:n}=this.props,a=r().omit(this.props,["value","digitWidth","padStartLength","forcePosition"]);if(null==e)return(0,o.jsx)("div",{...a,style:{color:i,minWidth:this.getMinWidth(t)},children:null!=n?n(this.padValue(t)):this.padValue(t)});let s=Math.max(e,t);return(0,o.jsxs)("div",{...a,style:{color:i,position:"relative",overflow:"hidden"},children:[(0,o.jsx)("div",{style:{visibility:"hidden",minWidth:this.getMinWidth(s)},children:this.padValue(s)}),(0,o.jsx)(c.Z.div,{style:{color:i,...this.getAnimatedStyle(this.prevAnimate)},children:null!=n?n(this.padValue(e)):this.padValue(e)}),(0,o.jsx)(c.Z.div,{style:{color:i,...this.getAnimatedStyle(this.currAnimate)},children:null!=n?n(this.padValue(t)):this.padValue(t)})]})}constructor(e){super(e),u(this,"prevAnimate",void 0),u(this,"currAnimate",void 0),u(this,"animateNext",()=>{let{currValue:e,nextValue:t}=this.state;null!=t?this.setState({prevValue:d.Z.isFocused()?e:null,currValue:t,nextValue:null}):this.setState({prevValue:null})}),this.state={prevValue:null,currValue:e.value,nextValue:null},this.prevAnimate=new c.Z.Value(0),this.currAnimate=new c.Z.Value(1)}}u(g,"Positions",h)},824578:function(e,t,i){i.d(t,{Q:()=>l}),i(653041);var n=i(442837),a=i(699516),o=i(111583),s=i(594174);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;return(0,n.Wu)([s.default,o.Z,a.Z],()=>{var i;let n=null===(i=s.default.getCurrentUser())||void 0===i?void 0:i.id,l=o.Z.getTypingUsers(e),r=[];for(let e in l){if(r.length>=t)break;let i=s.default.getUser(e);!(null==i||i.id===n||a.Z.isBlockedOrIgnored(i.id))&&r.push(i.id)}return r},[e,t])}},98474:function(e,t,i){i.d(t,{Z:()=>x}),i(47120);var n=i(200651),a=i(192379),o=i(119617),s=i(642128),l=i(748780),r=i(481060),c=i(596454),d=i(745510),u=i(314910),h=i(912893),m=i(768581),p=i(176354),g=i(675654),f=i(871125);let v=[];function x(e){let{messageId:t,emoji:i,startPosition:x,targetPosition:b}=e,[T,j]=a.useState(0),[_,C]=a.useState(0),[R,S]=a.useState(null),{confettiCanvas:N}=a.useContext(d.h),I=(0,o.uR)(N,R),E=a.useMemo(()=>[{src:null==i.id?p.ZP.getURL(i.name):m.ZP.getEmojiURL({id:i.id,animated:!1,size:22}),colorize:!1}],[i.name,i.id]),Z=b.x-b.width/2*.5,y=b.y-b.height/2*.5,O=(0,r.q_F)({from:{y:x.y},to:{y:y},config:{duration:450,easing:l.Z.Easing.in(l.Z.Easing.exp)},onChange:e=>{let{y:t}=e;C(t)}}),A=(0,r.q_F)({from:{x:x.x,scale:1,opacity:1},to:{x:Z,scale:.5,opacity:.4},config:{duration:450,easing:l.Z.Easing.in(l.Z.Easing.ease)},onRest:()=>{(0,h.G)(t,i.name,i.id)},onChange:e=>{let{x:t}=e;j(t)}});return a.useEffect(()=>{T>0&&_>0&&I.createConfetti({...g.We,position:{type:"static",value:{x:T,y:_}}})},[I,T,_]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Ji,{ref:S,sprites:E,colors:v,spriteWidth:g.Ko,spriteHeight:g.Ko}),(0,n.jsx)(u.ZP,{children:(0,n.jsx)(s.animated.div,{style:{...O},className:f.emojiContainer,children:(0,n.jsx)(s.animated.div,{style:{...A,opacity:A.opacity},children:(0,n.jsx)(c.Z,{className:f.emoji,emojiId:i.id,emojiName:i.name,animated:i.animated,size:"jumbo"})})})})]})}},56314:function(e,t,i){i.d(t,{v:()=>r});var n=i(442837),a=i(780384),o=i(607070),s=i(210887),l=i(712057);let r=e=>{let t=(0,n.e7)([o.Z],()=>o.Z.saturation),i=(0,n.e7)([s.Z],()=>(0,a.wj)(s.Z.theme));return(0,l.Z)(e,t,i)}},109434:function(e,t,i){i.d(t,{H:()=>v,v:()=>x}),i(47120);var n=i(512722),a=i.n(n),o=i(15729),s=i(313361),l=i(683860),r=i(731965),c=i(442837),d=i(592125),u=i(559241);function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let m=new Set,p={layoutType:s.X.LIST,sortOrder:l.z.CREATION_DATE,tagFilter:m,scrollPosition:0};class g{constructor(e,t){h(this,"set",void 0),h(this,"get",void 0),h(this,"channelStates",void 0),h(this,"setChannelState",void 0),h(this,"getChannelState",void 0),h(this,"toggleTagFilter",void 0),h(this,"setTagFilter",void 0),h(this,"setSortOrder",void 0),h(this,"setLayoutType",void 0),h(this,"setScrollPosition",void 0),this.set=e,this.get=t,this.channelStates={},this.setChannelState=(e,t)=>{let i=this.get(),n=this.getChannelState(e),a={...i.channelStates};a[e]={...n,...t},(0,r.j)(()=>this.set({channelStates:a}))},this.getChannelState=e=>{if(null==e)return p;let{channelStates:t}=this.get(),i=t[e];if(null==i){let t=d.Z.getChannel(e);a()(null!=t,"[Forum Channel Store] The channel should not be missing."),i={layoutType:t.getDefaultLayout(),sortOrder:t.getDefaultSortOrder(),tagFilter:m,scrollPosition:0}}return i},this.toggleTagFilter=(e,t)=>{let i=new Set(this.getChannelState(e).tagFilter);i.has(t)?i.delete(t):i.add(t),this.setTagFilter(e,i)},this.setTagFilter=(e,t)=>{this.setChannelState(e,{tagFilter:t}),u.Z.setFilterTagIds(t)},this.setSortOrder=(e,t)=>{this.setChannelState(e,{sortOrder:t}),u.Z.setSortOrder(t)},this.setLayoutType=(e,t)=>{this.setChannelState(e,{layoutType:t}),u.Z.setLayout(t)},this.setScrollPosition=(e,t)=>{this.setChannelState(e,{scrollPosition:t})}}}let f=(0,o.U)((e,t)=>new g(e,t)),v=e=>{let t=f();return null==(0,c.e7)([d.Z],()=>d.Z.getChannel(e))?p:t.getChannelState(e)},x=()=>f},73315:function(e,t,i){i.d(t,{Z:()=>d}),i(627341);var n=i(200651);i(192379);var a=i(120356),o=i.n(a),s=i(278074),l=i(481060),r=i(169525),c=i(103922);let d=e=>{let{obscureReason:t,iconClassname:i}=e;return(0,s.EQ)(t).with(r.wk.EXPLICIT_CONTENT,()=>(0,n.jsx)(l.fFY,{className:o()(i,c.obscuredIcon),color:"white"})).with(r.wk.SPOILER,()=>(0,n.jsx)(l.tEF,{size:"md",color:"currentColor",className:i})).otherwise(()=>null)}},404616:function(e,t,i){i.d(t,{Lp:()=>ei,NN:()=>es,TJ:()=>en,ZP:()=>ea,au:()=>eu,kZ:()=>ed,m9:()=>ec,og:()=>em}),i(47120);var n=i(200651),a=i(192379),o=i(120356),s=i.n(o),l=i(512722),r=i.n(l),c=i(913527),d=i.n(c),u=i(232713),h=i(91192),m=i(442837),p=i(692547),g=i(481060),f=i(738619),v=i(393238),x=i(963374),b=i(884338),T=i(446489),j=i(824578),_=i(95398),C=i(406432),R=i(169525),S=i(566006),N=i(255269),I=i(937889),E=i(443877),Z=i(524444),y=i(287151),O=i(267128),A=i(695346),M=i(433355),P=i(592125),w=i(496675),L=i(699516),k=i(451478),B=i(55935),U=i(109434),F=i(456269),V=i(109590),D=i(660189),G=i(208970),H=i(73315),z=i(470623),W=i(196255),K=i(858543),J=i(265641),X=i(627896),Y=i(883728),q=i(981631),$=i(217702),Q=i(388032),ee=i(432667),et=i(663362);let ei=72,en=72,ea=a.memo(function(e){let{threadId:t,goToThread:i,observePostVisibilityAnalytics:o,overrideMedia:l,className:c,containerWidth:d}=e,{channel:p,isOpen:f,messageCount:x,firstMessage:b,content:T,media:j}=function(e){let{threadId:t,overrideMedia:i}=e,n=(0,m.e7)([P.Z],()=>P.Z.getChannel(t));r()(null!=n,"the thread should not be null here, a store must have missed an update");let a=(0,m.e7)([M.ZP],()=>M.ZP.getCurrentSidebarChannelId(n.parent_id)===n.id),{firstMessage:o}=(0,V.cl)(n),{content:s,firstMedia:l}=(0,F.mX)({firstMessage:o}),{messageCountText:c}=(0,F.nP)(n);return{channel:n,isOpen:a,messageCount:c,firstMessage:o,content:s,media:null!=i?i:l}}({threadId:t,overrideMedia:l}),{ref:_,height:C}=(0,v.Z)(),R=(0,z.xH)(e=>e.setCardHeight,u.X);a.useEffect(()=>{null!=C&&R(t,C)},[C,R,t]),a.useEffect(()=>{null==o||o(_.current,t)},[_,o,t]);let S=a.useRef(null),{handleLeftClick:N,handleRightClick:I}=(0,Y.Z)({facepileRef:S,goToThread:i,channel:p}),{role:E,onFocus:Z,...y}=(0,h.JA)(t),{isFocused:O,handleFocus:A,handleBlur:w}=(0,J.Z)(Z);return(0,n.jsxs)("div",{ref:_,"data-item-id":t,onClick:N,onContextMenu:I,className:s()(ee.container,c,{[ee.isOpen]:f}),children:[(0,n.jsx)(g.P3F,{onClick:N,focusProps:{ringTarget:_},onContextMenu:I,"aria-label":Q.intl.formatToPlainString(Q.t.pgYN6e,{title:p.name,count:x}),className:ee.focusTarget,onFocus:A,onBlur:w,...y}),(0,n.jsxs)("div",{className:ee.left,children:[(0,n.jsx)(g.y5t,{children:(0,n.jsx)(eo,{channel:p,firstMessage:b,content:T,hasMediaAttachment:null!=j,containerWidth:d})}),(0,n.jsx)(g.Rny,{enabled:!O,children:(0,n.jsx)(er,{channel:p,firstMessage:b,facepileRef:S})})]}),(null==b?void 0:b.blocked)||null==j?null:(0,n.jsx)(ep,{channel:p,firstMedia:j})]})});function eo(e){let{channel:t,firstMessage:i,content:a,hasMediaAttachment:o,containerWidth:l}=e,{isNew:r,hasUnreads:c}=(0,F.J$)(t),d=es(t),{postTitleRef:u,isNewBadgeOverflow:h}=(0,X.x)(r,24,l);return(0,n.jsxs)("div",{className:ee.body,children:[(0,n.jsx)(K.ZP,{channel:t}),(0,n.jsx)("div",{className:s()(ee.header,{[ee.withNewBadgeOverflow]:h}),children:(0,n.jsxs)("div",{className:ee.headerText,children:[(0,n.jsx)(g.X6q,{variant:"heading-lg/semibold",color:c?"header-primary":"text-muted",lineClamp:2,className:ee.postTitleText,children:(0,n.jsxs)("span",{ref:u,children:[d,r&&(0,n.jsx)("span",{className:ee.newBadgeWrapper,children:(0,n.jsx)(g.IGR,{className:ee.newBadge,color:p.Z.unsafe_rawColors.BRAND_260.css,text:Q.intl.string(Q.t.y2b7CA)})})]})}),r&&h&&(0,n.jsx)(g.IGR,{className:ee.newBadge,color:p.Z.unsafe_rawColors.BRAND_260.css,text:Q.intl.string(Q.t.y2b7CA)})]})}),(0,n.jsx)("div",{className:ee.message,children:(0,n.jsx)(el,{channel:t,message:i,content:a,hasMediaAttachment:o,hasUnreads:c})})]})}function es(e){let t=(0,m.e7)([G.Z],()=>G.Z.getHasSearchResults(e.parent_id)),i=(0,m.e7)([G.Z],()=>G.Z.getSearchQuery(e.parent_id)),n=a.useMemo(()=>(0,x.nC)(t&&null!=i?i:""),[t,i]);return a.useMemo(()=>(0,I.ZP)({content:e.name,embeds:[]},{postProcessor:n}).content,[e.name,n])}let el=a.memo(function(e){let{message:t,channel:i,content:a,hasMediaAttachment:o,hasUnreads:l}=e,{isBlocked:r,isIgnored:c}=(0,m.cj)([L.Z],()=>({isBlocked:null!=t&&L.Z.isBlockedForMessage(t),isIgnored:null!=t&&L.Z.isIgnoredForMessage(t)})),d=(0,m.e7)([D.Z],()=>D.Z.isLoading(i.id)),u=(0,m.e7)([w.Z],()=>w.Z.can(q.Plq.MANAGE_MESSAGES,i)),h=A.cC.useSetting(),p=null;if(r)p=(0,n.jsx)(g.Text,{className:ee.blockedMessage,variant:"text-sm/medium",color:"text-muted",children:Q.intl.string(Q.t.Lkp2fH)});else if(c)p=(0,n.jsx)(g.Text,{className:ee.blockedMessage,variant:"text-sm/medium",color:"text-muted",children:Q.intl.string(Q.t.yWK7ZG)});else{let{contentPlaceholder:e,renderedContent:i}=null==t?{contentPlaceholder:null,renderedContent:null}:(0,O.f)(t,a,r,c,s()(ee.messageContent,et.inlineFormat,et.__invalid_smallFontSize),{leadingIconClass:ee.messageContentLeadingIcon,trailingIconClass:ee.messageContentTrailingIcon,iconSize:$.WW});p=null!=i?(0,n.jsx)(g.Text,{variant:"text-sm/semibold",color:l?"header-secondary":"text-muted",children:i}):o?null:(0,n.jsx)(g.Text,{tag:"span",variant:"text-sm/medium",color:l?"header-secondary":"text-muted",className:ee.messageContent,children:null==t?d?null:Q.intl.string(Q.t.mE3KJC):e})}return(0,n.jsxs)(_.a.Provider,{value:(0,N.Z)(h,u),children:[!r&&(0,n.jsx)(W.Z,{channel:i,message:t,renderColon:null!=p,hasUnreads:l}),(0,n.jsx)(g.Rny,{className:ee.messageFocusBlock,children:p})]})});function er(e){let{channel:t,facepileRef:i,firstMessage:a}=e,o=(0,j.Q)(t.id),s=(null==a?void 0:a.reactions)!=null&&a.reactions.length>0;return(0,n.jsxs)("div",{className:ee.footer,children:[s||null==a?null:(0,n.jsx)(ed,{firstMessage:a,channel:t}),null==a?null:(0,n.jsx)(eu,{firstMessage:a,channel:t}),(0,n.jsx)(ec,{channel:t,iconSize:14}),(0,n.jsx)("span",{className:ee.bullet,children:"â€¢"}),o.length>0?(0,n.jsxs)("div",{className:ee.typing,children:[(0,n.jsx)(em,{channel:t,userIds:o,facepileRef:i}),(0,n.jsx)("div",{className:ee.dots,children:(0,n.jsx)(g.bbz,{themed:!0,dotRadius:2})}),(0,n.jsx)(f.Z,{channel:t,className:ee.typingUsers,renderDots:!1})]}):(0,n.jsx)(eh,{channel:t})]})}function ec(e){let{channel:t,iconSize:i,showReadState:a=!1}=e,{messageCountText:o,unreadCount:l}=(0,F.nP)(t);return(0,n.jsxs)("div",{className:s()(ee.messageCountBox,{[ee.hasRead]:a&&null==l}),children:[(0,n.jsx)("span",{className:ee.messageCountIcon,children:(0,n.jsx)(g.kBi,{size:"custom",color:"currentColor",width:i,height:i})}),"number"==typeof o?(0,n.jsx)(T.Z,{value:o,digitWidth:9,className:ee.messageCountText}):(0,n.jsx)("div",{className:ee.messageCountText,children:o}),null==l?null:(0,n.jsxs)(g.Text,{className:ee.newMessageCount,variant:"text-sm/semibold",color:"text-brand",children:["(",Q.intl.format(Q.t.z3PEtr,{count:l}),")"]})]})}function ed(e){let{firstMessage:t,channel:i}=e,a=(0,m.e7)([P.Z],()=>P.Z.getChannel(i.parent_id)),o=(0,F.Bs)(a),{disableReactionCreates:s,isLurking:l,isPendingMember:r}=(0,E.Z)(i);return null==o||s?null:(0,n.jsx)(y.le,{className:ee.updateReactionButton,message:t,readOnly:i.isArchivedLockedThread(),useChatFontScaling:!1,isLurking:l,isPendingMember:r,emoji:o,hideCount:!0,count:0,burst_count:0,me:!1,me_burst:!1,type:S.O.NORMAL,emojiSize:"reaction",emojiSizeTooltip:"reaction"})}function eu(e){var t;let{firstMessage:i,channel:a}=e,o=(0,F.IN)(i),{disableReactionUpdates:s,isLurking:l,isPendingMember:r}=(0,E.Z)(a);return null==o?null:(0,n.jsx)(y.le,{className:ee.updateReactionButton,message:i,readOnly:s||a.isArchivedLockedThread(),isLurking:l,isPendingMember:r,useChatFontScaling:!1,type:o.burst_count>=o.count?S.O.BURST:S.O.NORMAL,emojiSize:"reaction",emojiSizeTooltip:"reaction",...o},"".concat(null!==(t=o.emoji.id)&&void 0!==t?t:0,":").concat(o.emoji.name))}function eh(e){var t;let{channel:i}=e,{sortOrder:a}=(0,U.H)(i.parent_id),o=(0,F.xw)(i,a),s=null===(t=i.threadMetadata)||void 0===t?void 0:t.createTimestamp,l=null==s?null:Q.intl.formatToPlainString(Q.t["13euCQ"],{timestamp:(0,B.vc)(d()(s),"LLLL")});return(0,n.jsx)(g.ua7,{text:l,tooltipClassName:ee.timestampTooltip,children:e=>(0,n.jsx)(g.Text,{className:ee.__invalid_activityText,variant:"text-sm/normal",color:"header-secondary",...e,children:o})})}function em(e){let{channel:t,userIds:i,facepileRef:a}=e,o=(0,F.iM)(t,i);return(0,n.jsx)("div",{ref:a,children:(0,n.jsx)(b.Z,{className:ee.__invalid_facepile,showDefaultAvatarsForNullUsers:!0,guildId:t.guild_id,users:o,max:5,size:16,hideMoreUsers:!0,showUserPopout:!0})})}function ep(e){let t,i,{channel:a,firstMedia:o}=e,l=(0,m.e7)([k.Z],()=>k.Z.isFocused()),r=(0,C.d$)(o.src),c=A.QK.useSetting(),[d,u]=(0,R.hL)({media:o,channel:a}),h=(0,R.MC)(u),{src:p,width:f,height:v,alt:x}=o;return v>f?i=en:t=ei,(0,n.jsx)(g.Rny,{enabled:!0,children:(0,n.jsxs)("div",{className:ee.bodyMedia,onClick:e=>e.stopPropagation(),children:[p.startsWith("data:")?(0,n.jsx)(g.Eep,{src:p,maxHeight:t,maxWidth:i,width:f,height:v,alt:null!=x&&d?h:x,className:ee.thumbnailContainer,imageClassName:s()({[ee.obscured]:d,[ee.thumbnailOverride]:!0})}):(0,Z.Yi)({src:p,maxHeight:t,maxWidth:i,width:f,height:v,alt:null!=x&&d?h:x,autoPlay:c,animated:r&&!d&&l,srcIsAnimated:o.srcIsAnimated,containerClassName:ee.thumbnailContainer,imageClassName:s()({[ee.obscured]:d}),analyticsSource:"ForumPostMediaPreview"}),d&&(0,n.jsx)(H.Z,{iconClassname:ee.obscuredTag,obscureReason:u})]})})}},470623:function(e,t,i){i.d(t,{AF:()=>T,oL:()=>x,xH:()=>b}),i(47120);var n=i(200651),a=i(192379),o=i(512722),s=i.n(o),l=i(65400),r=i(731965),c=i(430742),d=i(752305),u=i(592125),h=i(703558),m=i(883429),p=i(228392);function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class f{constructor(e,t,i){var n,a,o;g(this,"channelId",void 0),g(this,"_set",void 0),g(this,"get",void 0),g(this,"editorHeight",void 0),g(this,"editorAdditionRowHeight",void 0),g(this,"listViewCardHeights",void 0),g(this,"cardHeightVersion",void 0),g(this,"nameError",void 0),g(this,"messageError",void 0),g(this,"appliedTags",void 0),g(this,"popoutOpen",void 0),g(this,"guidelinesOpen",void 0),g(this,"previewing",void 0),g(this,"onboardingExpanded",void 0),g(this,"submitting",void 0),g(this,"formOpen",void 0),g(this,"name",void 0),g(this,"textAreaState",void 0),g(this,"hasClickedForm",void 0),g(this,"titleFocused",void 0),g(this,"bodyFocused",void 0),g(this,"set",void 0),g(this,"setEditorHeight",void 0),g(this,"setEditorAdditionRowHeight",void 0),g(this,"setCardHeight",void 0),g(this,"setNameError",void 0),g(this,"setMessageError",void 0),g(this,"toggleAppliedTag",void 0),g(this,"setPopoutOpen",void 0),g(this,"setGuidelinesOpen",void 0),g(this,"setPreviewing",void 0),g(this,"setSubmitting",void 0),g(this,"setFormOpen",void 0),g(this,"setOnboardingExpanded",void 0),g(this,"setTitleFocused",void 0),g(this,"setBodyFocused",void 0),g(this,"setName",void 0),g(this,"setTextAreaState",void 0),g(this,"setHasClickedForm",void 0),g(this,"resetFormState",void 0),g(this,"setFormOpenFromUserAction",void 0),this.channelId=e,this._set=t,this.get=i,this.editorHeight=64,this.editorAdditionRowHeight=0,this.listViewCardHeights={},this.cardHeightVersion=0,this.nameError=null,this.messageError=null,this.appliedTags=new Set,this.popoutOpen=!1,this.guidelinesOpen=!1,this.previewing=!1,this.onboardingExpanded=!1,this.submitting=!1,this.formOpen=!1,this.name="",this.textAreaState=(0,d.eK)(""),this.hasClickedForm=!1,this.titleFocused=!1,this.bodyFocused=!1,this.set=e=>{(0,r.j)(()=>this._set(e))},this.setEditorHeight=e=>{this.set({editorHeight:e})},this.setEditorAdditionRowHeight=e=>{this.set({editorAdditionRowHeight:e})},this.setCardHeight=(e,t)=>{let{listViewCardHeights:i,cardHeightVersion:n}=this.get();i[e]!==t&&(i[e]=t,this.set({cardHeightVersion:n+1}))},this.setNameError=e=>{this.set({nameError:e})},this.setMessageError=e=>{this.set({messageError:e})},this.toggleAppliedTag=e=>{let{appliedTags:t}=this.get();(t=new Set(t)).has(e)?t.delete(e):t.add(e),this.set({appliedTags:t}),c.Z.changeThreadSettings(this.channelId,{appliedTags:t})},this.setPopoutOpen=e=>{this.set({popoutOpen:e})},this.setGuidelinesOpen=e=>{this.set({guidelinesOpen:e})},this.setPreviewing=e=>{this.set({previewing:e})},this.setSubmitting=e=>{this.set({submitting:e})},this.setFormOpen=e=>{this.set({formOpen:e}),m.Z.clearForumSearch(this.channelId)},this.setOnboardingExpanded=e=>{this.set({onboardingExpanded:e})},this.setTitleFocused=e=>{this.set({titleFocused:e})},this.setBodyFocused=e=>{this.set({bodyFocused:e})},this.setName=e=>{this.set({name:e}),c.Z.changeThreadSettings(this.channelId,{name:e})},this.setTextAreaState=e=>{this.set({textAreaState:e}),c.Z.saveDraft(this.channelId,e.textValue,h.d.FirstThreadMessage)},this.setHasClickedForm=e=>{this.set({hasClickedForm:e})},this.resetFormState=()=>{let e=u.Z.getChannel(this.channelId),t=null==e?"":null==e.template?"":e.template.trim();this.set({name:"",textAreaState:(0,d.eK)(t),appliedTags:new Set,hasClickedForm:!1}),m.Z.clearForumSearch(this.channelId)},this.setFormOpenFromUserAction=()=>{if(this.hasClickedForm)return;let e=u.Z.getChannel(this.channelId);null!=e&&(0,p.HR)({guildId:e.guild_id,channelId:this.channelId}),this.set({hasClickedForm:!0,formOpen:!0}),m.Z.clearForumSearch(this.channelId)};let s=u.Z.getChannel(e);if(null==s)return;let l=null!==(n=h.Z.getThreadSettings(s.id))&&void 0!==n?n:{},f=null==s.template?"":s.template.trim(),v=h.Z.getDraft(s.id,h.d.FirstThreadMessage),x=(0,d.eK)(null!=v&&""!==v.trim()?v:f);this.name=null!==(a=l.name)&&void 0!==a?a:"",o=new Set(l.appliedTags),this.appliedTags=void 0!==o?o:new Set,this.formOpen=this.name.length>0,this.textAreaState=x}}let v=a.createContext(null);function x(e){let{children:t,channel:i}=e,o=a.useMemo(()=>(0,l.F)((e,t)=>new f(i.id,e,t)),[i]);return(0,n.jsx)(v.Provider,{value:o,children:t})}function b(e,t){let i=a.useContext(v);return s()(null!=i,"[useForumPostComposerStore] Context should not be null"),i(e,t)}function T(){let e=a.useContext(v);return s()(null!=e,"[useForumPostComposerStore] Context should not be null"),e}},196255:function(e,t,i){i.d(t,{Z:()=>u});var n=i(200651);i(192379);var a=i(120356),o=i.n(a),s=i(481060),l=i(942951),r=i(456269),c=i(388032),d=i(835494);let u=e=>{var t,i;let{message:a,channel:u,renderColon:h,hasUnreads:m}=e,{user:p,author:g}=(0,r.AJ)(u),f=null!==(i=null!==(t=null==g?void 0:g.nick)&&void 0!==t?t:null==p?void 0:p.username)&&void 0!==i?i:"",v=(0,l.l)({user:null==a?void 0:a.author,channelId:u.id,guildId:u.guild_id,messageId:null==a?void 0:a.id,stopPropagation:!0,ariaLabel:c.intl.formatToPlainString(c.t.CSIeU1,{name:f})})(null!=g?g:void 0)((0,n.jsx)(n.Fragment,{children:f}),u.id);return(0,n.jsxs)(s.Text,{tag:"span",className:o()(d.author,{[d.hasUnreads]:m}),variant:"text-sm/semibold",children:[v,!0===h?": ":null]})}},858543:function(e,t,i){i.d(t,{DM:()=>g,ZP:()=>f});var n=i(200651);i(192379);var a=i(120356),o=i.n(a),s=i(692547),l=i(481060),r=i(109434),c=i(456269),d=i(479099),u=i(176505),h=i(388032),m=i(432667),p=i(717277);function g(e){let{channel:t,isNew:i}=e,n=(0,c.eV)(t),a=n.slice(void 0,3),o=n.slice(3),s=n.length>3?n.length-3:0,l=t.hasFlag(u.zZ.PINNED),r=a.length>0||l||i;return{shownTags:a,remainingTags:o,moreTagsCount:s,isPinned:l,shouldRenderTagsRow:r,forumPostContainsTags:n.length>0}}function f(e){let{channel:t,isNew:i,tagsClassName:a,className:c}=e,{shownTags:u,remainingTags:f,moreTagsCount:v,isPinned:x,shouldRenderTagsRow:b}=g({channel:t,isNew:i}),{tagFilter:T}=(0,r.H)(t.id);return b?(0,n.jsxs)("div",{className:o()(p.tags,c),children:[i?(0,n.jsx)(l.IGR,{className:o()(m.newBadge,m.inTagsRow),color:s.Z.unsafe_rawColors.BRAND_260.css,text:h.intl.string(h.t.y2b7CA)}):null,x&&(0,n.jsx)("div",{className:p.pinIcon,children:(0,n.jsx)(l.ua7,{text:h.intl.string(h.t["1QLRYW"]),children:e=>(0,n.jsx)(l.qQX,{size:"custom",...e,width:16,height:16,color:"white"})})}),u.map(e=>(0,n.jsx)(d.Z,{tag:e,size:d.Z.Sizes.SMALL,className:o()(a,{[p.tagFiltered]:T.has(e.id)})},e.id)),v>0?(0,n.jsx)(d.f,{tags:f,count:v,size:d.Z.Sizes.SMALL}):null]}):null}},265641:function(e,t,i){i.d(t,{Z:()=>a}),i(47120);var n=i(192379);let a=e=>{let[t,i]=n.useState(!1);return{isFocused:t,handleFocus:n.useCallback(t=>{e(t),i(!0)},[e,i]),handleBlur:()=>{i(!1)}}}},627896:function(e,t,i){i.d(t,{x:()=>a}),i(47120);var n=i(192379);function a(e,t,i){let a=n.useRef(null),[o,s]=n.useState(!1),l=n.useCallback(()=>{if(e&&null!==a.current){var i;s((null===(i=a.current)||void 0===i?void 0:i.offsetHeight)>2.5*t)}},[s,e,t]);return n.useLayoutEffect(()=>{l()},[l,e,i]),{postTitleRef:a,isNewBadgeOverflow:o}}},883728:function(e,t,i){i.d(t,{Z:()=>s});var n=i(200651);i(192379);var a=i(374470),o=i(239091);let s=e=>{let{facepileRef:t,goToThread:s,channel:l}=e;return{handleLeftClick:e=>{var i;(0,a.k)(e.target)&&(null===(i=t.current)||void 0===i?void 0:i.contains(e.target))||s(l,e.shiftKey)},handleRightClick:e=>(0,o.jW)(e,async()=>{let{default:e}=await Promise.all([i.e("38902"),i.e("11300")]).then(i.bind(i,422200));return t=>(0,n.jsx)(e,{...t,channel:l})})}}},33154:function(e,t,i){i.d(t,{Z:()=>f,s:()=>g}),i(47120);var n,a=i(200651),o=i(192379),s=i(442837),l=i(481060),r=i(749210),c=i(313201),d=i(823379),u=i(41776),h=i(981631),m=i(388032),p=i(934964),g=((n={})[n.CHAT=0]="CHAT",n[n.REACTIONS=1]="REACTIONS",n);let f=e=>{let{type:t,guild:n,closePopout:g,ctaRef:f}=e,v=(0,c.Dt)(),[x,b]=o.useState(!1),T=(0,s.e7)([u.Z],()=>u.Z.isLurking(n.id),[n.id]);o.useEffect(()=>{x&&!T&&g()},[x,T,g]);let j=null,_=m.intl.string(m.t.d7b1p6);switch(t){case 0:j=m.intl.string(m.t.Xiwf1d);break;case 1:j=m.intl.string(m.t.GXvlU1);break;default:return(0,d.vE)(t)}if(null==j)return null;let C=async()=>{b(!0);try{await r.Z.joinGuild(n.id,{source:h.vtS.CHAT_INPUT_BLOCKER}),g()}catch{b(!1)}};return(0,a.jsxs)(l.VqE,{className:p.container,"aria-labelledby":v,children:[(0,a.jsx)("img",{alt:"",className:p.image,src:i(64395)}),(0,a.jsxs)("div",{className:p.content,children:[(0,a.jsx)(l.X6q,{variant:"heading-md/semibold",id:v,children:j}),(0,a.jsx)(l.Text,{color:"header-secondary",variant:"text-sm/normal",children:_}),(0,a.jsxs)("div",{className:p.buttonContainer,children:[(0,a.jsx)(l.zxk,{buttonRef:f,onClick:C,submitting:x,children:m.intl.string(m.t["9VLmlZ"])}),(0,a.jsx)(l.zxk,{onClick:g,look:l.zxk.Looks.BLANK,className:p.cancel,children:m.intl.string(m.t["2m+Sqq"])})]})]})]})}},960020:function(e,t,i){i.d(t,{I:()=>c,Z:()=>f}),i(47120);var n,a,o,s,l=i(442837),r=i(570140),c=((a={}).HOVER="HOVER",a.EXTERNAL="EXTERNAL",a.RANDOM="RANDOM",a);let d={},u={},h={},m=(e,t)=>{let i=null!=t.id?t.id:t.name;return"".concat(e,":").concat(i)},p=(e,t)=>{var i;let n;switch(e){case"HOVER":n="HOVER";break;case"RANDOM":n="RANDOM";break;default:n="EXTERNAL"}let a=Object.fromEntries(Object.entries(null!==(i=u[t])&&void 0!==i?i:{}).filter(e=>{let[,t]=e;return t===n}));if(Object.keys(a).length>=5&&"EXTERNAL"===e){for(let e in a)if(null==h[t]||null==h[t][e]){delete u[t][e],delete a[e];break}}return Object.keys(a).length};class g extends(n=l.ZP.Store){getReactionPickerAnimation(e,t,i){return d["".concat(e,":").concat(t,":").concat(null!=i?i:"")]}getEffectForEmojiId(e,t,i){var n;let a=m(t,i);return null===(n=u[e])||void 0===n?void 0:n[a]}}s="BurstReactionEffectsStore",(o="displayName")in g?Object.defineProperty(g,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):g[o]=s;let f=new g(r.Z,{BURST_REACTION_EFFECT_CLEAR:e=>{var t;let{channelId:i,messageId:n,emoji:a}=e,o=m(n,a);null===(t=u[i])||void 0===t||delete t[o]},BURST_REACTION_EFFECT_PLAY:e=>{var t,i,n;let{channelId:a,messageId:o,emoji:s,key:l}=e,r=m(o,s);if(p(l,a)>=5)return;let c=null!==(t=u[a])&&void 0!==t?t:{},d=(null!==(i=h[a])&&void 0!==i?i:{})[r],g=c[r];("HOVER"!==l||null==g)&&("HOVER"===g&&"EXTERNAL"===l&&null!=d&&("function"==typeof d.destroy&&d.destroy(),null===(n=h[a])||void 0===n||delete n[r],g=void 0),null==g&&(null!=u[a]?u[a][r]=l:u[a]={[r]:l}))},BURST_REACTION_ANIMATION_ADD:e=>{let{channelId:t,messageId:i,emoji:n,animation:a}=e,o=m(i,n);null==h[t]&&(h[t]={}),h[t][o]=a},BURST_REACTION_PICKER_ANIMATION_ADD:e=>{let{messageId:t,emojiName:i,emojiId:n,startPosition:a}=e;d["".concat(t,":").concat(i,":").concat(null!=n?n:"")]=a},BURST_REACTION_PICKER_ANIMATION_CLEAR:e=>{let{messageId:t,emojiName:i,emojiId:n}=e;delete d["".concat(t,":").concat(i,":").concat(null!=n?n:"")]}})},347904:function(e,t,i){i.d(t,{s4:()=>o,vJ:()=>s}),i(757143);var n=i(392711),a=i(302221);let o=(e,t)=>{let i=(0,a.WY)([t.r,t.g,t.b],2);return e=(e=e.replace(/(\[1,0,0,)/g,"[".concat(i[0][0]/255,",").concat(i[0][1]/255,",").concat(i[0][2]/255,","))).replace(/\[0,0,1,/g,"[".concat(i[1][0]/255,",").concat(i[1][1]/255,",").concat(i[1][2]/255,","))},s=(0,n.memoize)(e=>{let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i);return Math.abs(t)})},831244:function(e,t,i){i.d(t,{T:()=>o});var n=i(347904);let a=[{load:()=>i.e("59642").then(i.t.bind(i,759983,19))},{load:()=>i.e("54931").then(i.t.bind(i,488583,19))},{load:()=>i.e("22523").then(i.t.bind(i,420183,19))},{load:()=>i.e("35247").then(i.t.bind(i,782543,19))},{load:()=>i.e("69923").then(i.t.bind(i,267858,19))},{load:()=>i.e("96246").then(i.t.bind(i,108035,19))},{load:()=>i.e("30997").then(i.t.bind(i,299665,19))},{load:()=>i.e("50987").then(i.t.bind(i,545755,19))},{load:()=>i.e("14192").then(i.t.bind(i,412825,19))},{load:()=>i.e("78073").then(i.t.bind(i,82134,19))},{load:()=>i.e("54021").then(i.t.bind(i,913837,19))},{load:()=>i.e("7573").then(i.t.bind(i,403249,19))},{load:()=>i.e("219").then(i.t.bind(i,738664,19))},{load:()=>i.e("70528").then(i.t.bind(i,181976,19))},{load:()=>i.e("74294").then(i.t.bind(i,654947,19))},{load:()=>i.e("91199").then(i.t.bind(i,945518,19))},{load:()=>i.e("66071").then(i.t.bind(i,634794,19))},{load:()=>i.e("73921").then(i.t.bind(i,558619,19))}],o=async function(e,t,i){arguments.length>3&&void 0!==arguments[3]&&arguments[3];let o=a[(0,n.vJ)("".concat(e).concat(t).concat(i))%a.length];return await o.load()}},432376:function(e,t,i){i.d(t,{Z:()=>n});function n(e){let{channel:t,canChat:i,renderReactions:n,canAddNewReactions:a,isLurking:o,isGuest:s,communicationDisabled:l,isActiveChannelOrUnarchivableThread:r,isAutomodQuarantined:c}=e,d=t.isPrivate(),u=t.isSystemDM(),h=(i||d)&&r;return{disableReactionReads:!n,disableReactionCreates:o||s||!h||!((!0===a||d)&&!u&&r),disableReactionUpdates:o||s||!h||!0===l||!0===c}}},443877:function(e,t,i){i.d(t,{Z:()=>m}),i(47120);var n=i(442837),a=i(715903),o=i(71619),s=i(41776),l=i(665906),r=i(271383),c=i(607744),d=i(496675),u=i(432376),h=i(981631);function m(e){let t=null==e?void 0:e.guild_id,i=(0,n.e7)([c.Z],()=>null==t||c.Z.canChatInGuild(t),[t]),m=(0,n.e7)([s.Z],()=>null!=t&&s.Z.isLurking(t),[t]),p=(0,n.e7)([r.ZP],()=>null!=t&&r.ZP.isCurrentUserGuest(t),[t]),g=(0,n.e7)([d.Z],()=>i&&d.Z.can(h.Plq.ADD_REACTIONS,e),[i,e]),f=(0,a.ux)(t),[,v]=(0,o.AB)(t),x=(0,l.$R)(e);return null==e?{disableReactionReads:!0,disableReactionCreates:!0,disableReactionUpdates:!0,isLurking:!1,isGuest:!1,isPendingMember:!1}:{...(0,u.Z)({channel:e,canChat:i,renderReactions:!0,canAddNewReactions:g,isLurking:m,isGuest:p,communicationDisabled:v,isActiveChannelOrUnarchivableThread:x,isAutomodQuarantined:f}),isLurking:m,isGuest:p,isPendingMember:!1}}},89729:function(e,t,i){i.d(t,{g:()=>h});var n=i(392711),a=i.n(n),o=i(995774),s=i(592125),l=i(542578),r=i(699516),c=i(5192),d=i(566006),u=i(388032);function h(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.O.NORMAL,h=arguments.length>3?arguments[3]:void 0,m=l.Z.getReactions(e.getChannelId(),e.id,t,3,n),p=s.Z.getChannel(e.getChannelId()),g=null==p||p.isPrivate()?null:p.getGuildId(),f=e.getReaction(t),v=n===d.O.BURST,x=a()(m).reject(e=>r.Z.isBlockedOrIgnored(e.id)).take(3).map(e=>c.ZP.getName(g,null==p?void 0:p.id,e)).value();if(0===x.length)return"";let b={standard:{reactionTooltip1NInteractive:u.t.dgtYDA,reactionTooltip1N:u.t.mXild3,reactionTooltip1:u.t.Oro30N,reactionTooltip2NInteractive:u.t["0GBwVV"],reactionTooltip2N:u.t.UWGs2t,reactionTooltip2:u.t["p+0jvr"],reactionTooltip3NInteractive:u.t["dK6/7e"],reactionTooltip3N:u.t.UnXdX1,reactionTooltip3:u.t.bbPMcX,reactionTooltipNInteractive:u.t.Thj7LS,reactionTooltipN:u.t.CRrc7e},burst:{reactionTooltip1NInteractive:u.t.G98B0d,reactionTooltip1N:u.t["u/03eH"],reactionTooltip1:u.t["z4q3+/"],reactionTooltip2NInteractive:u.t.wkcffn,reactionTooltip2N:u.t.T4EYUl,reactionTooltip2:u.t.R2HykZ,reactionTooltip3NInteractive:u.t.OhtGx8,reactionTooltip3N:u.t.M8bwl5,reactionTooltip3:u.t.sNl6XV,reactionTooltipNInteractive:u.t.nsITOj,reactionTooltipN:u.t.dkieHx}},T=v?b.burst:b.standard,j=Math.max(0,(null!==(i=v?null==f?void 0:f.burst_count:null==f?void 0:f.count)&&void 0!==i?i:0)-x.length),_=(0,o.Lh)(t);return 1===x.length?j>0?null!=h?u.intl.formatToPlainString(T.reactionTooltip1NInteractive,{a:x[0],n:j,emojiName:_,onClick:h}):u.intl.formatToPlainString(T.reactionTooltip1N,{a:x[0],n:j,emojiName:_}):u.intl.formatToPlainString(T.reactionTooltip1,{a:x[0],emojiName:_}):2===x.length?j>0?null!=h?u.intl.formatToPlainString(T.reactionTooltip2NInteractive,{a:x[0],b:x[1],n:j,emojiName:_,onClick:h}):u.intl.formatToPlainString(T.reactionTooltip2N,{a:x[0],b:x[1],n:j,emojiName:_}):u.intl.formatToPlainString(T.reactionTooltip2,{a:x[0],b:x[1],emojiName:_}):3===x.length?j>0?null!=h?u.intl.formatToPlainString(T.reactionTooltip3NInteractive,{a:x[0],b:x[1],c:x[2],n:j,emojiName:_,onClick:h}):u.intl.formatToPlainString(T.reactionTooltip3N,{a:x[0],b:x[1],c:x[2],n:j,emojiName:_}):u.intl.formatToPlainString(T.reactionTooltip3,{a:x[0],b:x[1],c:x[2],emojiName:_}):null!=h?u.intl.formatToPlainString(T.reactionTooltipNInteractive,{n:j,emojiName:_,onClick:h}):u.intl.formatToPlainString(T.reactionTooltipN,{n:j,emojiName:_})}},287151:function(e,t,i){i.d(t,{aO:()=>ea,le:()=>er,op:()=>eo,y4:()=>es}),i(47120);var n,a=i(200651),o=i(192379),s=i(120356),l=i.n(s),r=i(772848),c=i(748780),d=i(866442),u=i(442837),h=i(846519),m=i(481060),p=i(596454),g=i(785388),f=i(607070),v=i(446489),x=i(367907),b=i(436774),T=i(98474),j=i(339085),_=i(906411),C=i(56314),R=i(231053),S=i(944386),N=i(305325),I=i(33154),E=i(692147),Z=i(197115),y=i(659215),O=i(222677),A=i(995774),M=i(695346),P=i(592125),w=i(430824),L=i(542578),k=i(914010),B=i(594174),U=i(451478),F=i(626135),V=i(74538),D=i(960020),G=i(566006),H=i(886132),z=i(183023),W=i(524444),K=i(89729),J=i(620652),X=i(640753),Y=i(981631),q=i(474936),$=i(388032),Q=i(350941),ee=i(470528),et=i(945384),ei=i(804036);function en(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let ea=9;function eo(e,t,i){(0,m.h7j)(e=>(0,a.jsx)(g.default,{...e,message:t,selectedReaction:i}))}function es(e,t,i){return i===G.O.BURST&&t||i===G.O.NORMAL&&e}class el extends(n=o.PureComponent){componentWillAppear(e){this.animateIn(e)}componentWillEnter(e){this.animateIn(e)}componentWillUnmount(){this.hideTooltip()}animateIn(e){let{autoUnfurlReactionTooltip:t}=this.props;U.Z.isFocused()?(this.scale.setValue(0),this.opacity.setValue(0),c.Z.parallel([c.Z.timing(this.scale,{toValue:1,duration:t?200:300,easing:c.Z.Easing.inOut(c.Z.Easing.back())}),c.Z.timing(this.opacity,{toValue:1,duration:t?200:300})]).start(e)):(this.scale.setValue(1),this.opacity.setValue(1),e())}render(){let e,t;let{count:i,burst_count:n,colors:o,isBurstReaction:s,hideCount:r,emoji:u,readOnly:h,isLurking:g,isGuest:f,isPendingMember:x,className:b,useChatFontScaling:j,message:_,hideEmoji:C,animationStartPosition:R,emojiSize:S}=this.props,{shouldShowTooltip:N,tooltipTextAria:I,reactionRef:Z,tooltipPositionKey:y}=this.state,O=j?et:ee,M={transform:[{scale:this.scale}],opacity:this.opacity},P=s?n:i;if(s&&null!=o){var w;let{accentColor:i,backgroundColor:n,opacity:a}=o,s=null!==(w=(0,d.wK)(null!=n?n:"",a))&&void 0!==w?w:"";this.isMe()&&(M.borderColor=n),M.background=s,e=i,t=i}let L=null==Z?void 0:Z.getBoundingClientRect(),k=null!=R&&null!=L,B=null==R;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(m.yRy,{shouldShow:N,"aria-label":null!=I&&I,renderPopout:this.renderTooltip,nudgeAlignIntoViewport:!0,position:"top",align:"center",positionKey:y,children:()=>(0,a.jsx)("div",{onMouseEnter:this.handleEnter,onMouseLeave:this.handleLeave,ref:this.handleSetReactionRef,children:(0,a.jsx)(c.Z.div,{className:l()(O.reaction,b,{[O.reactionMe]:this.isMe(),[O.reactionReadOnly]:h&&!g&&!x&&!f,[O.shakeReaction]:C&&null==R}),style:M,children:(0,a.jsx)(m.yRy,{renderPopout:this.renderLurkerModeUpsellPopout,position:"top",children:i=>(0,a.jsxs)(m.P3F,{...i,className:O.reactionInner,onClick:this.handleClick,"aria-disabled":h,"aria-label":(0,A.iD)(this.isMe(),P,u,s),"aria-pressed":this.isMe(),children:[(0,a.jsx)("div",{className:l()({[O.burstGlow]:s}),style:{boxShadow:"0 0 16px ".concat(t)}}),(0,a.jsxs)("div",{children:[s?(0,a.jsxs)(a.Fragment,{children:[k&&(0,a.jsx)(T.Z,{messageId:_.id,emoji:u,startPosition:R,targetPosition:L}),B&&(0,a.jsx)(X.Z,{count:n,emoji:u,channelId:_.getChannelId(),messageId:_.id,useChatFontScaling:j,color:t,emojiSize:"reactionLarge"===S?J.M.NORMAL_NEW:J.M.NORMAL})]}):null,(0,a.jsx)(p.Z,{className:l()({[O.hideEmoji]:C}),emojiId:u.id,emojiName:u.name,size:S,animated:u.animated})]}),r?null:(0,a.jsx)(v.Z,{className:O.reactionCount,value:P,color:e,digitWidth:ea}),(0,a.jsx)(E.Z,{count:P,reactionRef:Z})]})})})})})})}constructor(...e){super(...e),en(this,"isReactionEventActive",!1),en(this,"isKeyboardNavigation",!1),en(this,"scale",new c.Z.Value(1)),en(this,"opacity",new c.Z.Value(1)),en(this,"timeout",new h.V7),en(this,"hideTimeout",new h.V7),en(this,"ctaRef",o.createRef()),en(this,"type",G.O.NORMAL),en(this,"colors",{backgroundColor:void 0,borderColor:void 0,textColor:void 0}),en(this,"state",{shouldShowTooltip:!1,tooltipText:null,tooltipTextAria:null,reactionRef:null,tooltipPositionKey:void 0}),en(this,"hasShownTooltip",!1),en(this,"nonce",(0,r.Z)()),en(this,"userCanBurstReact",()=>this.props.userHasPremium),en(this,"handleClick",e=>{e.stopPropagation();let{message:t,emoji:i,readOnly:n,isBurstReaction:a,isPendingMember:o,isLurking:s,isGuest:l,isForumToolbar:r}=this.props,c=P.Z.getChannel(t.getChannelId());if(s||l){var d,u;null===(u=this.ctaRef)||void 0===u||null===(d=u.current)||void 0===d||d.focus();return}let h=t.getChannelId(),m=r?O.TW.FORUM_TOOLBAR:O.TW.MESSAGE_INLINE_BUTTON;if(a&&!this.userCanBurstReact()){(0,y.m)({analytics:{type:q.cd.BURST_REACTION_UPSELL,page:(null==c?void 0:c.getGuildId())!=null?Y.ZY5.GUILD_CHANNEL:Y.ZY5.DM_CHANNEL,section:null!=c?(0,A.s4)(c):void 0,object:Y.qAy.EMOJI_REACTION_UPSELL}});return}o?this.handleShowVerificationGate():n||(this.isMe()?(0,O.WO)({channelId:h,messageId:t.id,emoji:i,location:m,options:{burst:a}}):(0,O.rU)(h,t.id,i,m,{burst:a}))}),en(this,"handleEnter",e=>{let{emoji:t,message:i,type:n,reduceMotion:a,animateEmoji:o,autoUnfurlReactionTooltip:s}=this.props,l=n===G.O.BURST;l&&!this.isReactionEventActive&&!a&&o&&(0,O.T6)({channelId:i.getChannelId(),messageId:i.id,emoji:t,key:D.I.HOVER}),this.isReactionEventActive=!0,this.isKeyboardNavigation="focus"===e.type,this.timeout.start(l?750:s?200:500,this.showTooltip,!1)}),en(this,"handleEnterTooltip",()=>{this.isReactionEventActive=!0,this.handleShowTooltip()}),en(this,"handleShowTooltip",()=>{this.hideTimeout.stop(),this.isReactionEventActive&&(this.updateTooltipText(),L.Z.addChangeListener(this.updateTooltipText))}),en(this,"showTooltip",()=>{this.props.readOnly||(this.handleShowTooltip(),this.isReactionEventActive&&this.trackReactionTooltipViewed(),this.hasShownTooltip=!0)}),en(this,"handleLeave",()=>{this.isReactionEventActive=!1,this.isKeyboardNavigation=!1,this.timeout.stop(),L.Z.removeChangeListener(this.updateTooltipText),this.hideTimeout.start(200,this.hideTooltip,!1)}),en(this,"hideTooltip",()=>{this.setState({shouldShowTooltip:!1}),this.hasShownTooltip&&F.default.track(Y.rMx.CLOSE_POPOUT,{nonce:this.nonce})}),en(this,"isMe",()=>{let{me:e,me_burst:t,type:i}=this.props;return es(e,t,i)}),en(this,"updateTooltipText",()=>{let{message:e,emoji:t,type:i}=this.props,n=(0,K.g)(e,t,i),a=this.isKeyboardNavigation?n:(0,K.g)(e,t,i,Y.dG4);this.setState({tooltipText:a,tooltipTextAria:n,shouldShowTooltip:null!=a&&""!==a})}),en(this,"renderLurkerModeUpsellPopout",e=>{let{closePopout:t}=e,{message:i,isLurking:n}=this.props,o=P.Z.getChannel(i.getChannelId()),s=w.Z.getGuild(null==o?void 0:o.getGuildId());return n&&null!=s?(0,a.jsx)(I.Z,{ctaRef:this.ctaRef,type:I.s.REACTIONS,guild:s,closePopout:t}):(0,a.jsx)(a.Fragment,{})}),en(this,"renderEmojiDetails",()=>{let e=this.props.emoji;return null!=e.id&&(0,a.jsx)(ed,{emojiId:e.id,refreshPositionKey:this.refreshTooltipPositionKey,onClose:this.handleLeave,nonce:this.nonce})}),en(this,"renderTooltip",()=>{let{emoji:e,message:t,type:i,me_burst:n,isBurstReaction:o=!1}=this.props,{tooltipText:s}=this.state,r=i=>{let n=P.Z.getChannel(t.getChannelId());null!=n&&(this.handleLeave(),eo(n,t,{emoji:e,reactionType:o?G.O.BURST:G.O.NORMAL}))},c="string"==typeof s?""===s.trim():null==s,d=()=>c||null==s?null:(0,a.jsx)(m.Text,{variant:"text-sm/normal",className:ei.reactionTooltipText,"aria-label":s,children:s});return i===G.O.BURST?(0,a.jsxs)("div",{className:ei.reactionTooltip,onMouseEnter:this.handleEnterTooltip,onMouseLeave:this.handleLeave,children:[(0,a.jsx)(m.P3F,{className:ei.burstReactionTooltipInner,onClick:r,children:(0,a.jsxs)("div",{className:ei.burstReactionTooltipMessage,children:[(0,a.jsx)(p.Z,{className:ei.reactionTooltipEmoji,emojiId:e.id,emojiName:e.name,animated:e.animated,size:this.props.emojiSizeTooltip}),d()]})}),(()=>{let e=B.default.getCurrentUser();return n?(0,a.jsxs)("div",{className:l()(ei.burstReactionTooltipPrompt,ei.burstReactionTooltipSpacer),children:[(0,V.I5)(e)&&(0,a.jsx)(m.SrA,{size:"md",className:ei.burstReactionTooltipNitroIcon,color:b.JX.PREMIUM_TIER_2}),(0,a.jsx)(m.Text,{variant:"text-sm/normal",className:ei.reactionTooltipText,"aria-label":"super reaction tooltip cta",children:$.intl.string($.t.ZbNJXl)})]}):this.userCanBurstReact()?(0,a.jsxs)("div",{className:l()(ei.burstReactionTooltipPrompt,ei.burstReactionTooltipSpacer,ei.burstReactionTooltipPromptClickable),children:[(0,a.jsx)(m.SrA,{size:"md",className:ei.burstReactionTooltipNitroIcon,color:b.JX.PREMIUM_TIER_2}),(0,a.jsx)(m.P3F,{onClick:this.handleClick,children:(0,a.jsx)(m.Text,{variant:"text-sm/normal",className:ei.reactionTooltipText,"aria-label":"super reaction tooltip cta",children:$.intl.string($.t.kVfuVl)})})]}):this.userCanBurstReact()||this.isKeyboardNavigation?null:(0,a.jsx)("div",{className:l()(ei.burstReactionTooltipPrompt,ei.burstReactionTooltipSpacer),children:(0,a.jsxs)("div",{children:[(0,a.jsx)(m.Text,{variant:"text-sm/normal","aria-label":"super reaction tooltip upsell",children:$.intl.string($.t.W1bMkp)}),(0,a.jsx)(Z.Z,{subscriptionTier:q.Si.TIER_2,buttonText:$.intl.string($.t.mr4K7O),className:ei.burstReactionTooltipUpsellCta,onClick:e=>e.stopPropagation()})]})})})(),this.renderEmojiDetails()]}):(0,a.jsxs)("div",{className:ei.reactionTooltip,onMouseEnter:this.handleEnterTooltip,onMouseLeave:this.handleLeave,children:[(0,a.jsx)(m.P3F,{onClick:r,children:(0,a.jsxs)("div",{className:ei.reactionTooltipInner,children:[(0,a.jsx)(p.Z,{className:ei.reactionTooltipEmoji,emojiId:e.id,emojiName:e.name,animated:e.animated,size:this.props.emojiSizeTooltip}),d()]})}),this.renderEmojiDetails()]})}),en(this,"refreshTooltipPositionKey",()=>{this.setState({tooltipPositionKey:String(Date.now())})}),en(this,"handleShowVerificationGate",()=>{let{message:e,isPendingMember:t}=this.props;if(!t)return null;let i=P.Z.getChannel(e.getChannelId()),n=w.Z.getGuild(null==i?void 0:i.getGuildId());null!=n&&(0,N.hk)(n.id)}),en(this,"handleSetReactionRef",e=>{this.setState({reactionRef:e})}),en(this,"trackReactionTooltipViewed",()=>{let{emoji:e,message:t,type:i}=this.props,n=B.default.getCurrentUser(),a=P.Z.getChannel(t.getChannelId()),o=i===G.O.BURST,s=(0,V.I5)(n),l=o?q.cd.EMOJI_IN_BURST_REACTION_HOVER:q.cd.EMOJI_IN_REACTION_HOVER;!o||this.userCanBurstReact()||s||(l=q.cd.EMOJI_IN_BURST_REACTION_HOVER_UPSELL),x.ZP.trackWithMetadata(Y.rMx.EXPRESSION_TOOLTIP_VIEWED,{type:l,expression_id:e.id,expression_name:e.name,is_animated:e.animated,is_custom:null!=e.id,nonce:this.nonce}),!o||null==a||s||this.userCanBurstReact()||F.default.track(Y.rMx.PREMIUM_UPSELL_VIEWED,{type:q.cd.BURST_REACTION_UPSELL,location:{page:(null==a?void 0:a.getGuildId())!=null?Y.ZY5.GUILD_CHANNEL:Y.ZY5.DM_CHANNEL,section:(0,A.s4)(a),object:Y.qAy.EMOJI_REACTION_TOOLTIP_UPSELL}})})}}en(el,"defaultProps",{emojiSizeTooltip:"jumbo"});let er=o.memo(e=>{let{type:t,burst_colors:i,message:n,emoji:o}=e,s=t===G.O.BURST,l=(0,C.v)(s&&null!=i?i:[]),r=(0,u.e7)([D.Z],()=>void 0!==D.Z.getEffectForEmojiId(n.getChannelId(),n.id,o)),c=(0,u.e7)([f.Z],()=>f.Z.useReducedMotion),d=M.Yk.useSetting(),h=B.default.getCurrentUser(),m=(0,V.I5)(h),p=(0,u.e7)([D.Z],()=>D.Z.getReactionPickerAnimation(n.id,o.name,o.id)),g=s&&(r||null!=p);return(0,a.jsx)(el,{...e,colors:l,isBurstReaction:s,hideEmoji:g,userHasPremium:m,reduceMotion:c,animateEmoji:d,animationStartPosition:p})}),ec=e=>{var t,i,n;let{emojiId:o,expressionSourceGuild:s,hasJoinedExpressionSourceGuild:l,onClose:r,popoutData:c,currentGuildId:d,nonce:u}=e;(0,S.u)({emojiId:o,currentGuildId:d,popoutData:c,emojiSourceGuildId:null==s?void 0:s.id,nonce:u});let h=null!==(i=null==s?void 0:s.isDiscoverable())&&void 0!==i&&i,p=null!=s&&h,g=(null!==(n=null==s?void 0:null===(t=s.emojis)||void 0===t?void 0:t.length)&&void 0!==n?n:0)>1;return(0,a.jsx)(a.Fragment,{children:p?null==s?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:Q.reactionEmojiDetailsUnfurlGuildDetails,children:(0,a.jsx)(z.Oe,{expressionSourceGuild:s,hasJoinedExpressionSourceGuild:l,isDisplayingJoinGuildButtonInPopout:c.type===H.$.JOIN_GUILD})}),g&&(0,a.jsx)(z.n_,{emojiId:o,expressionSourceGuild:s,hasJoinedEmojiSourceGuild:l,onClose:r,popoutData:c,isDisplayingButtonInTopSection:!1})]}):(0,a.jsx)(m.Text,{variant:"text-sm/normal","aria-label":c.type,children:c.emojiDescription})})},ed=e=>{var t;let{emojiId:i,refreshPositionKey:n,onClose:s,nonce:r}=e,{joinedEmojiSourceGuild:c}=(0,u.cj)([j.ZP,w.Z],()=>{let e=j.ZP.getCustomEmojiById(i);return{joinedEmojiSourceGuild:(null==e?void 0:e.type)===_.B.GUILD?w.Z.getGuild(null==e?void 0:e.guildId):void 0}}),[d,h]=o.useState(void 0),[p,g]=o.useState(void 0),[f,v]=o.useState(null),[x,b]=o.useState(!1),[T,C]=o.useState(!1),[S,N]=o.useState(!1),I=null!=c,E=null!==(t=null==d?void 0:d.isDiscoverable())&&void 0!==t&&t,Z=k.Z.getGuildId(),y=null!=Z&&(Z===(null==d?void 0:d.id)||Z===(null==c?void 0:c.id)),O=B.default.getCurrentUser(),A=(0,H.a)({sourceType:f,expressionSourceApplication:null!=p?p:null,isPremium:V.ZP.isPremium(O),hasJoinedEmojiSourceGuild:I,isDiscoverable:E,emojiComesFromCurrentGuild:y,isUnusableRoleSubscriptionEmoji:!1,userIsRoleSubscriber:!1,isRoleSubscriptionEmoji:!1,shouldHideRoleSubscriptionCTA:!1});if(o.useEffect(()=>{x&&!S&&(async()=>{n(),C(!0);let e=null!=i?await (0,R.Fi)(i):null;if(null!=e)switch(v(e.type),e.type){case R.w6.APPLICATION:g(e.application);break;case R.w6.GUILD:h(e.guild)}else h(null);C(!1),N(!0),n()})()},[i,x,S,n]),I)return null;let M=()=>{b(!x)},P=x&&(void 0!==d||void 0!==p);return(0,a.jsxs)("div",{children:[P?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:Q.reactionEmojiDetailsDivider}),null!=A.emojiDescription&&A.type!==H.$.UNAVAILABLE&&(0,a.jsx)(m.Text,{variant:"text-sm/normal","aria-label":A.type,children:A.emojiDescription})]}):(()=>{let e=$.intl.string($.t["Igv+LS"]);return(0,a.jsxs)(m.P3F,{onClick:M,className:Q.reactionEmojiDetailsClickable,children:[(0,a.jsx)(m.Text,{variant:"text-sm/normal",color:"none","aria-label":e,children:e}),(0,a.jsx)(m.CJ0,{size:"xs",color:"currentColor",className:l()(Q.reactionEmojiDetailsArrow,{[Q.reactionEmojiDetailsArrowCollapsed]:!x})})]})})(),T?(0,a.jsx)(W.SE,{className:Q.emojiDetailsLoader}):P&&(0,a.jsx)(ec,{emojiId:i,expressionSourceGuild:d,hasJoinedExpressionSourceGuild:I,onClose:s,popoutData:A,currentGuildId:Z,nonce:r})]})}},620652:function(e,t,i){i.d(t,{M:()=>f,Z:()=>x});var n,a=i(200651),o=i(192379),s=i(120356),l=i.n(s),r=i(500923),c=i.n(r),d=i(570140),u=i(960020),h=i(831244),m=i(815605),p=i(981631),g=i(15417),f=((n={})[n.NORMAL=16]="NORMAL",n[n.NORMAL_NEW=20]="NORMAL_NEW",n[n.LARGE=32]="LARGE",n);let v=async e=>{var t;let{effect:i}=e,n=await (0,h.T)(i.channelId,null!==(t=i.messageId)&&void 0!==t?t:p.lds,i.emoji.name),a=await (0,m.aB)("".concat(i.channelId,":").concat(i.messageId,":").concat(i.emoji.name),i.url,n,i.color);return a.assets[0].p=i.url,a};function x(e){let{className:t,effect:i,onComplete:n,emojiSize:s=16}=e,r=o.useRef(null),h=s*m.Vz,p=(h+s)/2;return o.useEffect(()=>{let e;if(null!=i)return async function(){if(null!=r.current){let t=await v({effect:i});(e=c().loadAnimation({container:r.current,renderer:"svg",loop:!1,autoplay:!0,animationData:t})).addEventListener("complete",()=>{null==n||n(),e.destroy()}),null!=i.channelId&&null!=i.messageId&&null!=i.emoji&&i.key===u.I.HOVER&&d.Z.dispatch({type:"BURST_REACTION_ANIMATION_ADD",channelId:i.channelId,messageId:i.messageId,emoji:i.emoji,animation:e})}}(),()=>{null!=e&&e.destroy()}},[n,i,s]),(0,a.jsx)("div",{className:g.effectsWrapper,children:(0,a.jsx)("div",{className:l()(g.effect,t),style:{transform:"translateY(".concat(p,"px)"),height:h,width:h},ref:r})})}},640753:function(e,t,i){i.d(t,{Z:()=>f}),i(47120);var n=i(200651),a=i(192379),o=i(442837),s=i(570140),l=i(607070),r=i(222677),c=i(695346),d=i(960020),u=i(347904),h=i(620652),m=i(815605),p=i(943225),g=i(492740);let f=a.memo(function(e){let{channelId:t,messageId:i,emoji:f,useChatFontScaling:v,color:x,count:b,emojiSize:T}=e,j=(0,o.e7)([d.Z],()=>d.Z.getEffectForEmojiId(t,i,f)),_=a.useMemo(()=>(0,m.Zn)(f,x,t,{key:j,messageId:i}),[x,j,f,t,i]),[C,R]=a.useState(!1),S=(0,o.e7)([l.Z],()=>l.Z.useReducedMotion),N=c.Yk.useSetting(),I=a.useCallback(()=>{s.Z.dispatch({type:"BURST_REACTION_EFFECT_CLEAR",channelId:t,messageId:i,emoji:f})},[f,t,i]);return(a.useEffect(()=>{let e=()=>{if(C)return;let e=(0,u.vJ)("".concat(Date.now()).concat(t).concat(i).concat(f.name))%10;(e+=b>4?4:b-1)>7&&(R(!0),(0,r.T6)({channelId:t,messageId:i,emoji:f,key:d.I.RANDOM}))};if(C||S&&!N||!N)return;e();let n=setInterval(e,5e3);return()=>{clearInterval(n)}},[N,t,b,f,f.name,C,i,S]),null==j)?null:(0,n.jsx)(h.Z,{className:(v?g:p).effect,effect:_,onComplete:I,emojiSize:T})})},815605:function(e,t,i){i.d(t,{Vz:()=>c,Zn:()=>u,aB:()=>d}),i(757143);var n=i(392711),a=i(772848),o=i(134432),s=i(963838),l=i(302221),r=i(347904);let c=7.5,d=(0,n.memoize)((e,t,i,n)=>new Promise(e=>{let a=new Image;a.src=t,a.crossOrigin="Anonymous",a.onload=()=>{let t=32*(0,o.x_)(),s=JSON.stringify(i);if(null!=n&&(s=(0,r.s4)(s,(0,l.oo)(n))),a.width===t&&a.height===t||0===a.width&&0===a.height)e(JSON.parse(s));else{let t=128/a.width*a.height;e(JSON.parse(s=(s=s.replace(/"w":128,"h":128/,'"w":128,"h":'.concat(t))).replace(/"a":{"a":0,"k":\[64,64/,'"a":{"a":0,"k":[64,'.concat(t/2))))}}}));function u(e,t,i,n){let{emojiSize:o,key:l,messageId:r}=null!=n?n:{},c=(0,s._r)(e,null!=o?2*o:void 0);return{channelId:i,messageId:r,emoji:e,animationId:(0,a.Z)(),url:c,key:l,color:t}}},942951:function(e,t,i){i.d(t,{l:()=>h});var n=i(200651),a=i(192379),o=i(481060),s=i(100527),l=i(906732),r=i(184301),c=i(347475),d=i(592125),u=i(91047);function h(e){let{user:t,channelId:i,guildId:h,messageId:m,stopPropagation:p=!1,ariaLabel:g}=e,{analyticsLocations:f}=(0,l.ZP)(s.Z.USERNAME),v=a.useCallback(e=>{let n=d.Z.getChannel(i);null!=n&&null!=t&&(0,u.Pv)(e,t,n)},[t,i]);return a.useCallback(e=>(a,s)=>{let d=t=>(0,n.jsx)(o.rz2,{...null!=t?t:{},onContextMenu:v,name:a,color:null==e?void 0:e.colorString,roleName:null==e?void 0:e.colorRoleName,"aria-label":g}),u=e=>t=>{p&&t.stopPropagation(),e(t)};return(0,n.jsx)(l.Gt,{value:f,children:null!=t?(0,n.jsx)(o.yRy,{position:"right",preload:()=>(0,r.Z)(t.id,t.getAvatarURL(h,80),{guildId:h,channelId:i}),renderPopout:a=>(0,n.jsx)(c.Z,{...a,userId:t.id,guildId:h,channelId:i,messageId:m,roleId:null==e?void 0:e.colorRoleId}),children:e=>{let{onClick:t,...i}=e;return d({onClick:u(t),...i})}}):d(void 0)},s)},[f,t,i,h,m,v,p,g])}},692147:function(e,t,i){i.d(t,{Z:()=>m});var n=i(200651),a=i(192379),o=i(392711),s=i(399606),l=i(351780),r=i(576125),c=i(465858),d=i(112843),u=i(524484);function h(e){let{reactionRef:t,count:i}=e,n=a.useRef(i),r=(0,s.e7)([l.Z],()=>l.Z.getState()),u=(0,d.Z)(),h=(0,c.Z)(t);return a.useEffect(()=>{if(i>n.current&&null!=h){let e=(0,o.clamp)(i,r.confettiCount/2,2*r.confettiCount);u.fire(h.x,h.y,{count:e})}n.current=i},[i,h,u,r.confettiCount]),null}function m(e){return(0,n.jsx)(r.Z,{confettiLocation:u.Hn.REACTION,children:(0,n.jsx)(h,{...e})})}},659215:function(e,t,i){i.d(t,{default:()=>p,m:()=>g});var n=i(200651);i(192379);var a=i(481060),o=i(230711),s=i(104494),l=i(639119),r=i(790527),c=i(474936),d=i(981631),u=i(388032),h=i(777447),m=i(784370);function p(e){var t,i;let{onClose:a,analyticsSource:p,...g}=e,f=u.intl.format(u.t["JmbS+f"],{onClick:()=>{o.Z.open(d.oAB.PREMIUM),a()}}),v=(0,l.N)(),x=(0,s.Ng)(),b=null!=v||null!=x;return(0,n.jsx)(r.Z,{artURL:m,artContainerClassName:h.artContainer,modalClassName:h.modalContainer,bodyClassName:h.bodyContainer,type:c.cd.BURST_REACTION_UPSELL,title:u.intl.string(u.t.N4SCJy),body:f,glowUp:f,analyticsSource:p,analyticsLocation:{page:d.ZY5.PREMIUM_UPSELL_BURST_REACTIONS,object:d.qAy.BUTTON_CTA},onClose:a,subscribeButtonText:b?void 0:u.intl.string(u.t["8x0jKS"]),subscriptionTier:null!==(i=null==v?void 0:null===(t=v.subscription_trial)||void 0===t?void 0:t.sku_id)&&void 0!==i?i:c.Si.TIER_2,backButtonText:u.intl.string(u.t.f3Pet7),...g})}function g(e){let{analytics:t}=e;(0,a.ZDy)(async()=>{let{default:e}=await Promise.resolve().then(i.bind(i,659215));return i=>(0,n.jsx)(e,{analyticsSource:t,...i})})}},834471:function(e,t,i){e.exports={container:"container_cc2dff",scroller:"scroller_cc2dff",reactorsContainer:"reactorsContainer_cc2dff",reactors:"reactors_cc2dff",reactionDefault:"reactionDefault_cc2dff",reactionSelected:"reactionSelected_cc2dff",emoji:"emoji_cc2dff",emojiText:"emojiText_cc2dff",burstEmojiSection:"burstEmojiSection_cc2dff",hideEmoji:"hideEmoji_cc2dff",burstEmoji:"burstEmoji_cc2dff",spinner:"spinner_cc2dff",spinnerMore:"spinnerMore_cc2dff",reactor:"reactor_cc2dff",reactorDefault:"reactorDefault_cc2dff reactor_cc2dff",name:"name_cc2dff",nickname:"nickname_cc2dff",username:"username_cc2dff",tagFaded:"tagFaded_cc2dff",discriminator:"discriminator_cc2dff",remove:"remove_cc2dff"}},871125:function(e,t,i){e.exports={emojiContainer:"emojiContainer__0524a",emoji:"emoji__0524a"}},103922:function(e,t,i){e.exports={obscuredIcon:"obscuredIcon__43090"}},432667:function(e,t,i){e.exports={container:"container_faa96b",isOpen:"isOpen_faa96b",dots:"dots_faa96b",focusTarget:"focusTarget_faa96b",left:"left_faa96b",body:"body_faa96b",messageFocusBlock:"messageFocusBlock_faa96b",message:"message_faa96b",messageContent:"messageContent_faa96b",messageContentTrailingIcon:"messageContentTrailingIcon_faa96b",messageContentLeadingIcon:"messageContentLeadingIcon_faa96b",bodyMedia:"bodyMedia_faa96b",obscuredTag:"obscuredTag_faa96b",thumbnailContainer:"thumbnailContainer_faa96b",thumbnailOverride:"thumbnailOverride_faa96b",obscured:"obscured_faa96b",header:"header_faa96b",footer:"footer_faa96b",bullet:"bullet_faa96b",headerText:"headerText_faa96b",postTitleText:"postTitleText_faa96b",newBadgeWrapper:"newBadgeWrapper_faa96b",newBadge:"newBadge_faa96b",inTagsRow:"inTagsRow_faa96b",typing:"typing_faa96b",typingUsers:"typingUsers_faa96b",messageCountBox:"messageCountBox_faa96b",messageCountIcon:"messageCountIcon_faa96b",hasRead:"hasRead_faa96b",messageCountText:"messageCountText_faa96b",newMessageCount:"newMessageCount_faa96b",updateReactionButton:"updateReactionButton_faa96b",timestampTooltip:"timestampTooltip_faa96b",blockedMessage:"blockedMessage_faa96b",withNewBadgeOverflow:"withNewBadgeOverflow_faa96b"}},835494:function(e,t,i){e.exports={author:"author_d3eee8",hasUnreads:"hasUnreads_d3eee8"}},717277:function(e,t,i){e.exports={tags:"tags__08166",pinIcon:"pinIcon__08166",tagFiltered:"tagFiltered__08166"}},934964:function(e,t,i){e.exports={container:"container__7e919",content:"content__7e919",buttonContainer:"buttonContainer__7e919",cancel:"cancel__7e919",image:"image__7e919"}},470528:function(e,t,i){i.r(e.exports={reactions:"reactions_f8896c",largeReactions:"largeReactions_f8896c",icon:"icon_f8896c",largeIcon:"largeIcon_f8896c",reactionBtn:"reactionBtn_f8896c",active:"active_f8896c",largeReactionBtn:"largeReactionBtn_f8896c",visible:"visible_f8896c",forceShow:"forceShow_f8896c",hideEmoji:"hideEmoji_f8896c",reaction:"reaction_f8896c",shakeReaction:"shakeReaction_f8896c",shake:"shake_f8896c",reactionReadOnly:"reactionReadOnly_f8896c",reactionCount:"reactionCount_f8896c",reactionMe:"reactionMe_f8896c",reactionInner:"reactionInner_f8896c",remainingReactions:"remainingReactions_f8896c",premiumIcon:"premiumIcon_f8896c",sparkles:"sparkles_f8896c",burstGlow:"burstGlow_f8896c"})},945384:function(e,t,i){i.r(e.exports={reactions:"reactions__23977",largeReactions:"largeReactions__23977",icon:"icon__23977",largeIcon:"largeIcon__23977",reactionBtn:"reactionBtn__23977",active:"active__23977",largeReactionBtn:"largeReactionBtn__23977",visible:"visible__23977",forceShow:"forceShow__23977",hideEmoji:"hideEmoji__23977",reaction:"reaction__23977",shakeReaction:"shakeReaction__23977",shake:"shake__23977",reactionReadOnly:"reactionReadOnly__23977",reactionCount:"reactionCount__23977",reactionMe:"reactionMe__23977",reactionInner:"reactionInner__23977",remainingReactions:"remainingReactions__23977",premiumIcon:"premiumIcon__23977",sparkles:"sparkles__23977",burstGlow:"burstGlow__23977"})},804036:function(e,t,i){e.exports={reactionTooltip:"reactionTooltip_b49891",reactionTooltipEmoji:"reactionTooltipEmoji_b49891",reactionTooltipText:"reactionTooltipText_b49891",reactionTooltipInner:"reactionTooltipInner_b49891",burstReactionTooltipInner:"burstReactionTooltipInner_b49891",burstReactionTooltipMessage:"burstReactionTooltipMessage_b49891",burstReactionTooltipSpacer:"burstReactionTooltipSpacer_b49891",burstReactionTooltipPrompt:"burstReactionTooltipPrompt_b49891",burstReactionTooltipPromptClickable:"burstReactionTooltipPromptClickable_b49891",burstReactionTooltipNitroIcon:"burstReactionTooltipNitroIcon_b49891",burstReactionTooltipUpsellCta:"burstReactionTooltipUpsellCta_b49891"}},15417:function(e,t,i){e.exports={effect:"effect_a9ddb3",effectsWrapper:"effectsWrapper_a9ddb3"}},943225:function(e,t,i){i.r(e.exports={effect:"effect__263e4",effects:"effects__263e4"})},492740:function(e,t,i){i.r(e.exports={effect:"effect_e5f2cb",effects:"effects_e5f2cb"})},777447:function(e,t,i){e.exports={artContainer:"artContainer_ade26d",modalContainer:"modalContainer_ade26d",bodyContainer:"bodyContainer_ade26d"}}}]);
//# sourceMappingURL=d4c845a302e379d6.js.map